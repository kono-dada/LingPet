# 桌面宠物项目前端文件文档

本文档详细说明了桌面宠物项目前端每个文件的功能和作用。

## 核心启动文件

### src/main.ts
**功能**：应用程序的入口文件
- 创建Vue应用实例
- 注册路由器
- 挂载应用到DOM元素
- 这是整个前端应用的启动点

### src/App.vue
**功能**：应用程序的根组件
- 提供路由视图渲染
- 根据当前路由动态设置页面样式
- 为设置页面和主页面提供不同的背景样式
- 设置全局CSS样式，包括防止文本选中和拖拽
- 处理透明背景的设置

## 路由系统

### src/router/index.ts
**功能**：路由配置文件
- 定义应用的所有路由规则
- 使用懒加载优化性能
- 配置三个主要页面：主页面、设置页面、聊天气泡页面
- 使用Hash路由模式以适配桌面应用

## 页面组件

### src/pages/MainPage.vue
**功能**：主页面组件，显示桌面宠物
- 渲染宠物头像组件
- 处理窗口拖拽功能
- 管理宠物的大小、透明度、边框显示等外观设置
- 监听来自设置窗口的实时预览更新
- 从后端加载保存的配置
- 实现窗口位置持久化
- 响应式地调整窗口大小

### src/pages/SettingsPage.vue
**功能**：设置页面组件
- 提供完整的设置界面
- 包含侧边栏导航和主内容区
- 支持多个设置标签页：外观设置、AI设置、关于页面
- 使用图标和现代化的UI设计
- 处理不同设置模块之间的切换

### src/pages/ChatBubblePage.vue
**功能**：聊天气泡页面组件（需要进一步查看具体实现）
- 专门用于显示聊天对话的独立窗口页面

## 核心组件

### src/components/PetAvatar.vue
**功能**：宠物头像组件
- 显示宠物的当前表情图片
- 处理点击切换表情的逻辑
- 包含抖动动画效果
- 提供设置按钮，可打开设置窗口
- 集成聊天输入框，支持与AI对话
- 监听AI配置变化并重新加载配置
- 防止图片拖拽和选中

### src/components/AppearanceSettings.vue
**功能**：外观设置组件
- 提供宠物大小调节功能
- 提供透明度调节功能
- 提供边框显示开关
- 使用自定义滑块组件
- 实现实时预览和最终保存的分离
- 与主窗口进行事件通信

### src/components/AISettings.vue
**功能**：AI设置组件（需要进一步查看具体实现）
- 配置AI聊天相关的参数
- 管理API密钥、模型选择等设置

### src/components/AboutSettings.vue
**功能**：关于页面组件（需要进一步查看具体实现）
- 显示应用信息、版本号等
- 可能包含使用说明和帮助信息

### src/components/CustomSlider.vue
**功能**：自定义滑块组件（需要进一步查看具体实现）
- 提供统一的滑块UI组件
- 支持自定义颜色、范围、精度等属性
- 用于各种数值设置

### src/components/ChatBubble.vue
**功能**：聊天气泡组件（需要进一步查看具体实现）
- 显示对话消息的气泡样式组件
- 可能包含消息格式化和动画效果

## 组合式函数 (Composables)

### src/composables/usePet.ts
**功能**：宠物行为管理组合式函数
- 管理宠物的当前表情状态
- 提供表情切换功能
- 实现随机表情选择
- 管理宠物的行为状态（活跃度、心情等）
- 提供互动功能（点击、悬停、触摸）
- 预加载所有表情图片以避免加载闪烁

### src/composables/useAI.ts
**功能**：AI功能管理组合式函数
- 管理AI配置（API密钥、基础URL、模型等）
- 提供AI对话功能
- 处理AI API调用
- 配置验证和错误处理
- 与后端进行AI配置的同步
- 支持流式和非流式响应

### src/composables/useSettings.ts
**功能**：设置管理组合式函数（需要进一步查看具体实现）
- 统一管理各种设置状态
- 提供设置窗口的打开/关闭功能
- 处理设置标签页的切换

### src/composables/settings/useAppearanceSettings.ts
**功能**：外观设置专用组合式函数（需要进一步查看具体实现）
- 专门管理外观相关的设置
- 处理预览和实际设置的同步

### src/composables/settings/useAISettings.ts
**功能**：AI设置专用组合式函数（需要进一步查看具体实现）
- 专门管理AI相关的配置
- 处理AI配置的验证和保存

### src/composables/settings/useAboutSettings.ts
**功能**：关于页面专用组合式函数（需要进一步查看具体实现）
- 管理关于页面的状态和数据

### src/composables/window/useWindowDrag.ts
**功能**：窗口拖拽功能组合式函数（需要进一步查看具体实现）
- 实现窗口的拖拽移动功能
- 处理鼠标事件和窗口位置更新

### src/composables/window/useWindowListeners.ts
**功能**：窗口事件监听组合式函数（需要进一步查看具体实现）
- 管理各种窗口相关的事件监听器
- 处理窗口生命周期事件

### src/composables/window/useWindowPosition.ts
**功能**：窗口位置管理组合式函数（需要进一步查看具体实现）
- 管理窗口位置的持久化
- 记录和恢复窗口位置

### src/composables/window/useWindowResize.ts
**功能**：窗口大小调整组合式函数（需要进一步查看具体实现）
- 处理窗口大小的动态调整
- 根据宠物大小调整窗口尺寸

### src/composables/index.ts
**功能**：组合式函数的统一导出文件
- 提供所有组合式函数的集中导出
- 简化组件中的导入操作

## 常量定义

### src/constants/emotions.ts
**功能**：表情相关常量
- 定义所有可用的宠物表情
- 设置默认表情
- 提供表情名称的类型安全

### src/constants/ai.ts
**功能**：AI相关常量
- 定义常用的API基础URL
- 设置温度值预设
- 定义最大Token限制
- 设置响应超时时间

### src/constants/settings.ts
**功能**：设置相关常量（需要进一步查看具体实现）
- 定义设置的默认值和限制范围
- 提供设置相关的常量配置

### src/constants/settings-ui.ts
**功能**：设置UI相关常量（需要进一步查看具体实现）
- 定义设置界面的UI常量
- 包含标签页配置、图标等

## 类型定义

### src/types/emotion.ts
**功能**：表情相关类型定义（需要进一步查看具体实现）
- 定义表情名称的TypeScript类型
- 提供表情相关的接口定义

### src/types/ai.ts
**功能**：AI相关类型定义
- 定义AI消息接口
- 定义AI响应格式
- 定义AI配置接口
- 定义聊天请求和响应的类型
- 提供对话上下文的类型安全

### src/types/settings.ts
**功能**：设置相关类型定义
- 定义宠物设置接口
- 定义设置约束条件
- 提供设置预览状态的类型

### src/types/settings-ui.ts
**功能**：设置UI相关类型定义（需要进一步查看具体实现）
- 定义设置界面组件的类型
- 提供UI状态管理的类型安全

### src/types/window.ts
**功能**：窗口相关类型定义（需要进一步查看具体实现）
- 定义窗口状态和属性的类型
- 提供窗口操作相关的接口

## 服务文件

### src/services/eventBus.ts
**功能**：事件总线服务
- 基于Tauri的事件系统实现组件间通信
- 提供设置预览事件的监听器
- 提供设置确定事件的监听器
- 提供设置保存完成事件的监听器
- 支持AI配置变更事件
- 封装事件的发射和监听功能

### src/services/windowConfig.ts
**功能**：窗口配置服务（需要进一步查看具体实现）
- 管理窗口的配置信息
- 处理窗口属性的持久化

## 工具文件

### src/utils/config.ts
**功能**：配置工具（文件为空，待实现）
- 计划用于配置相关的工具函数

### src/utils/tauri.ts
**功能**：Tauri工具（文件为空，待实现）
- 计划用于Tauri API的封装和工具函数

## 静态资源

### src/assets/vue.svg
**功能**：Vue.js标志图片
- 用于展示或装饰的Vue标志

### src/vite-env.d.ts
**功能**：Vite环境类型声明
- 为Vite特定的功能提供TypeScript类型支持
- 确保导入资源文件时的类型安全

## 配置文件

### index.html
**功能**：应用的HTML入口文件
- 定义应用的基本HTML结构
- 引入必要的meta标签和脚本

### package.json
**功能**：项目依赖和脚本配置
- 定义项目的依赖包
- 配置构建和开发脚本
- 设置项目元信息

### vite.config.ts
**功能**：Vite构建工具配置
- 配置Vite的构建选项
- 设置插件和开发服务器
- 优化构建输出

### tsconfig.json & tsconfig.node.json
**功能**：TypeScript配置文件
- 配置TypeScript编译选项
- 设置类型检查规则
- 定义路径映射和模块解析

---

## 项目架构特点

1. **模块化设计**：使用Vue 3的组合式API，将功能拆分为可复用的组合式函数
2. **类型安全**：全面使用TypeScript，确保代码的类型安全
3. **事件驱动**：通过事件总线实现组件间的松耦合通信
4. **响应式设计**：充分利用Vue的响应式系统，实现实时预览和更新
5. **桌面应用优化**：专门为桌面环境设计，包含窗口管理和系统集成功能
6. **AI集成**：内置AI对话功能，支持多种AI服务提供商
7. **配置持久化**：设置能够保存到后端并在重启后恢复

这个项目展现了现代前端开发的最佳实践，结合了Vue 3、TypeScript、Tauri等技术栈，创建了一个功能丰富的桌面宠物应用。
